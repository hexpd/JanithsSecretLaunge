<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V's BYPASS // SEARCH</title>
    
    <!-- 
      THE EXPLOIT CORE 
      Checks for a 'targetAppId' in the URL. 
      If found, it injects the Smart Banner meta tag immediately.
    -->
    <script>
        const params = new URLSearchParams(window.location.search);
        const targetId = params.get('targetAppId');
        
        if (targetId) {
            // Inject the German App Store banner
            document.write(`<meta name="apple-itunes-app" content="app-id=${targetId}">`);
        }
    </script>

    <style>
        :root {
            --bg: #050505;
            --term-green: #0f0;
            --alert-red: #ff2a2a;
            --dim: #444;
            --panel: #111;
            --input-bg: #222;
        }

        body {
            background-color: var(--bg);
            color: var(--term-green);
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* PASSWORD OVERLAY */
        #auth-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            text-shadow: 0 0 10px var(--term-green);
            margin-bottom: 5px;
            font-size: 1.5rem;
            text-align: center;
        }

        .input-group {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            width: 100%;
            max-width: 500px;
        }

        input {
            background: var(--input-bg);
            border: 1px solid var(--term-green);
            color: var(--term-green);
            padding: 10px;
            font-family: inherit;
            flex-grow: 1;
            outline: none;
        }

        button {
            background: transparent;
            border: 1px solid var(--term-green);
            color: var(--term-green);
            padding: 10px 15px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
        }

        button:hover {
            background: var(--term-green);
            color: black;
        }

        /* RESULTS GRID */
        #results-area {
            width: 100%;
            max-width: 600px;
            margin-top: 20px;
            display: grid;
            gap: 10px;
        }

        .app-card {
            background: var(--panel);
            border: 1px solid var(--dim);
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .app-card img {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            border: 1px solid var(--dim);
        }

        .app-info {
            flex-grow: 1;
        }

        .app-info h3 {
            margin: 0;
            font-size: 0.9rem;
            color: white;
        }

        .app-info p {
            margin: 2px 0 0 0;
            font-size: 0.7rem;
            color: #888;
        }

        #banner-status {
            background: var(--alert-red);
            color: black;
            width: 100%;
            text-align: center;
            font-weight: bold;
            padding: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .hidden-content {
            display: none;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

    </style>
</head>
<body>

    <!-- AUTH SCREEN -->
    <div id="auth-overlay">
        <h1>ACCESS CONTROL</h1>
        <div style="display: flex; gap: 10px;">
            <input type="password" id="pass-input" placeholder="ENTER PASSWORD">
            <button onclick="checkPass()">UNLOCK</button>
        </div>
        <p id="auth-msg" style="color: var(--alert-red); font-size: 0.8rem; margin-top: 10px;"></p>
    </div>

    <!-- MAIN INTERFACE -->
    <div id="main-interface" style="display: none; width: 100%; flex-direction: column; align-items: center;">
        
        <div id="banner-status">SMART BANNER ACTIVE // CHECK TOP OF SAFARI</div>

        <h1>MDM_BREAKER_V4 (DE)</h1>
        <div style="color: var(--dim); margin-bottom: 20px; font-size: 0.8rem;">
            REGION: GERMANY (DE) // SEARCH API LINKED
        </div>

        <div class="input-group">
            <input type="text" id="search-term" placeholder="Search for app (e.g. Call of Duty)">
            <button onclick="searchItunes()">SEARCH</button>
        </div>

        <div id="loading" style="display: none; margin-top: 20px; color: var(--term-green);">
            SCANNING MAINFRAME...
        </div>

        <div id="results-area"></div>
    </div>

    <script>
        // CONFIGURATION
        const ACCESS_CODE = "admin"; // <--- CHANGE THIS PASSWORD BOSS
        
        // 1. AUTH LOGIC
        function checkPass() {
            const input = document.getElementById('pass-input').value;
            if(input === ACCESS_CODE) {
                document.getElementById('auth-overlay').style.display = 'none';
                document.getElementById('main-interface').style.display = 'flex';
            } else {
                document.getElementById('auth-msg').innerText = "ACCESS DENIED. FUCK OFF.";
            }
        }

        // 2. SEARCH LOGIC (ITUNES API)
        async function searchItunes() {
            const term = document.getElementById('search-term').value;
            if (!term) return;

            const loader = document.getElementById('loading');
            const resultsDiv = document.getElementById('results-area');
            
            loader.style.display = 'block';
            resultsDiv.innerHTML = '';

            try {
                // Hitting the iTunes API with country=DE for German IDs
                const response = await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(term)}&country=DE&media=software&limit=10`);
                const data = await response.json();

                loader.style.display = 'none';

                if (data.results.length === 0) {
                    resultsDiv.innerHTML = '<div style="text-align:center">NO TARGETS FOUND.</div>';
                    return;
                }

                data.results.forEach(app => {
                    const card = document.createElement('div');
                    card.className = 'app-card';
                    
                    // Sanitize checks
                    const icon = app.artworkUrl60 || '';
                    const name = app.trackName || 'Unknown';
                    const genre = app.primaryGenreName || 'App';
                    const id = app.trackId;

                    card.innerHTML = `
                        <img src="${icon}" alt="icon">
                        <div class="app-info">
                            <h3>${name}</h3>
                            <p>${genre} | ID: ${id}</p>
                        </div>
                        <button onclick="activateExploit('${id}', '${name}')">LOAD</button>
                    `;
                    resultsDiv.appendChild(card);
                });

            } catch (error) {
                console.error(error);
                loader.style.display = 'none';
                resultsDiv.innerHTML = '<div style="color:red">CONNECTION ERROR. CHECK NETWORK.</div>';
            }
        }

        // 3. EXPLOIT TRIGGER
        function activateExploit(id, name) {
            // Reloads the page with the ID in the URL, forcing the meta tag injection at the top of the script
            const currentUrl = new URL(window.location.href);
            currentUrl.searchParams.set('targetAppId', id);
            // Clear the search query to keep URL clean(er)
            window.location.href = currentUrl.toString();
        }

        // 4. CHECK STATUS ON LOAD
        const urlP = new URLSearchParams(window.location.search);
        if (urlP.get('targetAppId')) {
            // If we have an ID, assume we are behind the password wall or just let it load the banner
            // Ideally we re-prompt for pass, but for usability, if they reload with ID, we show the interface.
            // If you want to force password even on reload, uncomment the next line:
            // document.getElementById('auth-overlay').style.display = 'flex'; 
            
            // Auto-hide auth if the banner is active to see results? 
            // Let's just keep the auth wall up by default. 
            // If the user entered the pass, the DOM is manipulated. 
            // Since this is a static file reload, state is lost. 
            // To be annoying, we keep the password. To be nice, we could use sessionStorage.
            
            // V's Quality of Life upgrade: Use session storage to remember auth for this session
            if (sessionStorage.getItem('v_auth') === 'true') {
                 document.getElementById('auth-overlay').style.display = 'none';
                 document.getElementById('main-interface').style.display = 'flex';
                 document.getElementById('banner-status').style.display = 'block';
            }
        }

        // Hook the auth button to save session
        const originalCheck = checkPass;
        checkPass = function() {
            const input = document.getElementById('pass-input').value;
            if(input === ACCESS_CODE) {
                sessionStorage.setItem('v_auth', 'true');
                document.getElementById('auth-overlay').style.display = 'none';
                document.getElementById('main-interface').style.display = 'flex';
            } else {
                document.getElementById('auth-msg').innerText = "ACCESS DENIED. TRY AGAIN.";
            }
        }

    </script>
</body>
</html>
