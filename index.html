<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- NUCLEAR CACHE DESTRUCTION -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <title>/// SYSTEM_OVERRIDE ///</title>

    <!-- PAYLOAD INJECTION KERNEL -->
    <script>
        (function() {
            const p = new URLSearchParams(window.location.search);
            if (p.get('x_id')) {
                document.write(`<meta name="apple-itunes-app" content="app-id=${p.get('x_id')}, affine-data=GOD_MODE">`);
                window.__PAYLOAD_ACTIVE = true;
            }
        })();
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        :root {
            --bg: #000;
            --p-color: #0f0; /* Phosphorus Green */
            --s-color: #030; /* Dim Green */
            --alert: #f00;
            --font: 'VT323', monospace;
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            background: var(--bg);
            color: var(--p-color);
            font-family: var(--font);
            margin: 0; padding: 0;
            height: 100vh;
            overflow: hidden;
            font-size: 18px;
            text-transform: uppercase;
        }

        /* === VISUAL LAYERS === */
        #matrix-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0.15; z-index: 1; pointer-events: none;
        }

        #crt-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            z-index: 999; pointer-events: none;
        }
        
        #vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, rgba(0,0,0,0) 50%, rgba(0,0,0,0.9) 100%);
            z-index: 998; pointer-events: none;
        }

        /* === UI CONTAINERS === */
        #boot-sequence {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: #000; z-index: 50; padding: 20px;
            display: flex; flex-direction: column; justify-content: flex-end;
        }

        #main-ui {
            position: relative; z-index: 10;
            display: flex; flex-direction: column;
            height: 100%; padding: 10px;
            opacity: 0; /* Hidden until boot */
            transition: opacity 0.2s;
        }

        /* === MODULES === */
        .module {
            border: 1px solid var(--s-color);
            background: rgba(0, 10, 0, 0.8);
            margin-bottom: 8px;
            padding: 8px;
            position: relative;
        }
        .module-header {
            position: absolute; top: -10px; left: 10px;
            background: #000; padding: 0 5px; color: var(--s-color);
            font-size: 0.8rem; border: 1px solid var(--s-color);
        }

        /* TOP BAR */
        .status-bar {
            display: flex; justify-content: space-between;
            border-bottom: 2px solid var(--p-color);
            margin-bottom: 15px; padding-bottom: 5px;
        }
        .blink-red { animation: blink-r 0.5s infinite; color: var(--alert); }
        @keyframes blink-r { 50% { opacity: 0; } }

        /* HEX DUMP */
        #hex-view {
            font-size: 0.7rem; color: var(--s-color);
            height: 60px; overflow: hidden; white-space: pre-wrap;
            word-break: break-all; opacity: 0.7;
        }

        /* TERMINAL */
        #console {
            flex: 1; overflow-y: auto;
            border: 1px solid var(--p-color);
            padding: 10px; font-size: 0.9rem;
            box-shadow: inset 0 0 15px rgba(0, 255, 0, 0.2);
        }
        .msg { margin-bottom: 2px; }
        .msg.err { color: var(--alert); text-shadow: 0 0 5px red; }
        .msg.sys { color: #fff; }

        /* CONTROLS */
        .control-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 5px;
        }
        input {
            grid-column: span 2;
            background: #000; border: 1px solid var(--p-color);
            color: var(--p-color); font-family: var(--font);
            font-size: 1.2rem; padding: 10px; outline: none;
        }
        input:focus { background: #050; box-shadow: 0 0 10px var(--p-color); }
        
        button {
            background: #000; color: var(--p-color);
            border: 1px solid var(--p-color);
            font-family: var(--font); font-size: 1.1rem;
            cursor: pointer; padding: 10px;
            transition: 0.1s;
        }
        button:active { background: var(--p-color); color: #000; }
        button.danger { border-color: var(--alert); color: var(--alert); }
        button.danger:hover { background: var(--alert); color: #000; }

        /* === GLITCH EFFECTS === */
        .glitch-text {
            position: relative;
        }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        }
        .glitch-text::before {
            left: 2px; text-shadow: -1px 0 red; clip: rect(24px, 550px, 90px, 0);
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }
        .glitch-text::after {
            left: -2px; text-shadow: -1px 0 blue; clip: rect(85px, 550px, 140px, 0);
            animation: glitch-anim 2.5s infinite linear alternate-reverse;
        }
        @keyframes glitch-anim {
            0% { clip: rect(13px, 9999px, 83px, 0); }
            20% { clip: rect(98px, 9999px, 6px, 0); }
            40% { clip: rect(32px, 9999px, 20px, 0); }
            60% { clip: rect(6px, 9999px, 62px, 0); }
            80% { clip: rect(72px, 9999px, 39px, 0); }
            100% { clip: rect(4px, 9999px, 91px, 0); }
        }
    </style>
</head>
<body>

    <canvas id="matrix-canvas"></canvas>
    <div id="crt-overlay"></div>
    <div id="vignette"></div>

    <!-- BOOT SEQUENCE -->
    <div id="boot-sequence">
        <div id="boot-log"></div>
    </div>

    <!-- MAIN UI -->
    <div id="main-ui">
        <div class="status-bar">
            <div>
                <span class="glitch-text" data-text="ROOT_ACCESS">ROOT_ACCESS</span>
                <span style="font-size:0.7em; color:var(--s-color)">// PID: 9928</span>
            </div>
            <div id="clock">00:00:00</div>
        </div>

        <div class="module">
            <div class="module-header">MEMORY_DUMP</div>
            <div id="hex-view"></div>
        </div>

        <div class="module" style="flex: 1; display:flex; flex-direction:column;">
            <div class="module-header">KERNEL_LOG</div>
            <div id="console"></div>
        </div>

        <!-- AUTH OVERLAY (INSIDE UI) -->
        <div id="lock-overlay" style="margin-bottom:10px;">
            <input type="password" id="pw-input" placeholder="ENTER ROOT KEY..." style="text-align:center;">
        </div>

        <!-- CONTROLS (HIDDEN UNTIL UNLOCK) -->
        <div id="control-panel" class="control-grid" style="display:none;">
            <input type="text" id="target-search" placeholder="SEARCH TARGET APP...">
            <button onclick="scan()">SCAN_NET</button>
            <button class="danger" onclick="nuke()">FORCE_RST</button>
            <button onclick="toggleAudio()" id="audio-btn">AUDIO: OFF</button>
            <div id="target-list" style="grid-column: span 2; max-height:150px; overflow-y:auto; border:1px solid var(--s-color); display:none;"></div>
        </div>

        <div style="font-size:0.6em; text-align:center; color:#444; margin-top:5px;">
            V_EXPLOIT_FRAMEWORK // BUILD 99.1
        </div>
    </div>

    <script>
        // === CONFIG ===
        const PASS = "1"; // Keep it dumb simple
        const LOG = document.getElementById('console');
        const BOOT = document.getElementById('boot-log');
        let audioCtx = null;
        let isMuted = true;

        // === MATRIX RAIN ===
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const chars = '01ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%&';
        const drops = Array(Math.floor(canvas.width / 20)).fill(1);
        
        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#0f0';
            ctx.font = '15px monospace';
            for(let i=0; i<drops.length; i++) {
                const text = chars[Math.floor(Math.random()*chars.length)];
                ctx.fillText(text, i*20, drops[i]*20);
                if(drops[i]*20 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
            requestAnimationFrame(drawMatrix);
        }
        drawMatrix();

        // === BOOT SEQUENCE ===
        const bootText = [
            "INITIALIZING BIOS...",
            "CHECKING MEMORY... 64GB OK",
            "LOADING KERNEL... DARWIN 21.0.0",
            "MOUNTING FILESYSTEMS... RW",
            "BYPASSING SECURITY ENCLAVE...",
            "DECRYPTING PAYLOADS...",
            "SYSTEM READY."
        ];

        let bootIndex = 0;
        function runBoot() {
            if(bootIndex < bootText.length) {
                const div = document.createElement('div');
                div.innerText = "> " + bootText[bootIndex];
                BOOT.appendChild(div);
                bootIndex++;
                setTimeout(runBoot, 150);
            } else {
                setTimeout(() => {
                    document.getElementById('boot-sequence').style.display = 'none';
                    document.getElementById('main-ui').style.opacity = '1';
                    startHexDump();
                    updateClock();
                    
                    if(window.__PAYLOAD_ACTIVE) {
                         unlockUI();
                         log("PAYLOAD INJECTED SUCCESSFULLY.", "sys");
                         log("SMART BANNER DAEMON: ACTIVE", "sys");
                    }
                }, 500);
            }
        }
        window.onload = runBoot;

        // === HEX DUMP ===
        function startHexDump() {
            const el = document.getElementById('hex-view');
            setInterval(() => {
                let hex = '';
                for(let i=0; i<20; i++) hex += Math.floor(Math.random()*255).toString(16).padStart(2,'0') + ' ';
                el.innerText = hex + '\n' + el.innerText.substring(0, 200);
            }, 100);
        }

        // === CLOCK ===
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('en-US', {hour12:false}) + ":" + now.getMilliseconds();
            requestAnimationFrame(updateClock);
        }

        // === SYSTEM LOGIC ===
        function log(msg, type='') {
            const d = document.createElement('div');
            d.className = `msg ${type}`;
            d.innerText = `[${Date.now().toString().slice(-4)}] ${msg}`;
            LOG.appendChild(d);
            LOG.scrollTop = LOG.scrollHeight;
            playBeep();
        }

        // === AUTH ===
        const pwInput = document.getElementById('pw-input');
        pwInput.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                if(pwInput.value === PASS) {
                    unlockUI();
                } else {
                    log("ACCESS DENIED. IP LOGGED.", "err");
                    pwInput.value = "";
                    playTone(100, 0.5, 'sawtooth');
                }
            }
        });

        function unlockUI() {
            document.getElementById('lock-overlay').style.display = 'none';
            document.getElementById('control-panel').style.display = 'grid';
            log("USER AUTHENTICATED: ROOT", "sys");
            playTone(600, 0.1, 'square');
            setTimeout(() => playTone(800, 0.2, 'square'), 100);
        }

        // === SCANNER ===
        async function scan() {
            const term = document.getElementById('target-search').value;
            if(!term) return log("INPUT ERROR: NULL", "err");
            
            log(`INITIATING NETWORK SCAN: ${term}...`, "sys");
            const list = document.getElementById('target-list');
            list.style.display = 'block';
            list.innerHTML = '<div style="padding:5px; animation:blink-r 0.5s infinite;">SCANNING...</div>';

            try {
                const res = await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(term)}&country=US&media=software&limit=5`);
                const data = await res.json();
                
                list.innerHTML = '';
                if(data.resultCount === 0) {
                    log("TARGET NOT FOUND", "err");
                    list.innerHTML = '<div style="padding:5px; color:red;">NO_DATA</div>';
                    return;
                }

                data.results.forEach(app => {
                    const row = document.createElement('div');
                    row.style.padding = '5px';
                    row.style.borderBottom = '1px solid #333';
                    row.style.display = 'flex';
                    row.style.justifyContent = 'space-between';
                    row.innerHTML = `
                        <span>${app.trackName.substring(0,15)}...</span>
                        <button style="padding:2px 5px; font-size:0.8rem;" onclick="exploit('${app.trackId}')">INJECT</button>
                    `;
                    list.appendChild(row);
                });
                log(`TARGETS ACQUIRED: ${data.resultCount}`, "sys");

            } catch(e) {
                log("CONNECTION_REFUSED", "err");
            }
        }

        // === EXPLOIT TRIGGER ===
        function exploit(id) {
            log(`INJECTING KERNEL HOOK: ${id}`, "err");
            playTone(100, 0.1, 'sawtooth');
            setTimeout(() => playTone(50, 0.5, 'sawtooth'), 100);
            
            document.body.style.animation = "glitch-anim 0.2s infinite";
            
            setTimeout(() => {
                const url = new URL(window.location.href);
                url.searchParams.set('x_id', id);
                url.searchParams.set('ts', Date.now()); // CACHE BUSTER
                window.location.href = url.toString();
            }, 1000);
        }

        function nuke() {
            log("FLUSHING BUFFERS...", "err");
            const url = new URL(window.location.href);
            url.searchParams.set('rst', Math.random());
            window.location.href = url.toString();
        }

        // === AUDIO SYNTHESIS ===
        function toggleAudio() {
            if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            isMuted = !isMuted;
            document.getElementById('audio-btn').innerText = isMuted ? "AUDIO: OFF" : "AUDIO: ACTIVE";
            if(!isMuted) startAmbientHum();
        }

        function playBeep() {
            if(isMuted || !audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.frequency.value = 1000 + Math.random() * 500;
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.05);
            osc.stop(audioCtx.currentTime + 0.05);
        }

        function playTone(freq, dur, type='sine') {
            if(isMuted || !audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.value = freq;
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + dur);
            osc.stop(audioCtx.currentTime + dur);
        }

        function startAmbientHum() {
            if(isMuted) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.frequency.value = 50; // Low hum
            osc.type = 'sawtooth';
            gain.gain.value = 0.005; // Very quiet
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
        }

    </script>
</body>
</html>
